import React, { useState, useEffect } from "react";
import styles from "../styles/Home.module.css";
import PageHeader from "../components/Reusable/PageHeader";
import DisplayListings from "../components/Reusable/DisplayListings";

/*
await fetch(
      `${
        process.env.NEXT_PUBLIC_LINK_TO_FETCH
      }/get-special-selling-listings?category=${"Housing"}`
    )
      .then((response) => response.json())
      .then((data) => {
        setSellingHouses(data);
      });
    await fetch(
      `${
        process.env.NEXT_PUBLIC_LINK_TO_FETCH
      }/get-special-renting-listings?category=${"House"}`
    )
      .then((response) => response.json())
      .then((data) => {
        setRentingHouses(data);
      });

*/

export default function Home() {
  const [sellingSpecialHouses, setSellingSpecialHouses] = useState([]);
  const [rentingSpecialHouses, setRentingSpecialHouses] = useState([]);

  useEffect(async () => {
    // stex fetcherna arvelu
    await fetch(`${process.env.NEXT_PUBLIC_LINK_TO_FETCH}/get-houses-for-sale`)
      .then((response) => response.json())
      .then((data) => {
        setSellingSpecialHouses(data.specialHousesForSale);
      });
  }, []);

  return (
    <div className={styles.homepage_container}>
      {/* to be changed later */}
      <PageHeader
        title="Home Page | Listing Website"
        description="description"
        content="Generated by create next app"
        iconLink="/favicon.ico"
      />
      {sellingSpecialHouses.length ? (
        <DisplayListings
          containerTitle="Houses for Sale"
          itemsToDisplay={sellingSpecialHouses}
          amountOfItemsToDisplay={10}
        />
      ) : null}
      {/* takinnery petqa update anem */}
      {/* <DisplayListings
        containerTitle="Houses For Sale"
        itemsToDisplay={sellingHouses}
        amountOfItemsToDisplay={10}
      />
      <DisplayListings
        containerTitle="Houses For Rent"
        itemsToDisplay={rentingHouses}
        amountOfItemsToDisplay={10}
      /> */}
    </div>
  );
}
